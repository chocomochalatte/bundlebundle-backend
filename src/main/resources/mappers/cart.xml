<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tohome.bundlebundle.cart.mapper.MyCartMapper">
	
	<select id="showMyItem" parameterType="Integer" resultType="CartProductVO">
        <![CDATA[
         select
    		a.id as cart_id,
    		b.id as product_id,
    		b.origin as product_origin,
		    b.brand as product_brand,
		    b.name as product_name,
		    b.thumbnail_img as product_thumbnail_img, 
		    b.price as product_price, a.product_cnt 
		    from personal_cart a join product b on a.product_id=b.id
		    where a.member_id=#{memberId}
        ]]>
    </select>
    
    <select id="checkItemCart" parameterType="CartItemAddVO" resultType="CartProductVO">
        <![CDATA[
         	select * from personal_cart
    		where member_id=#{memberId} and product_id=#{productId}
        ]]>
    </select>
    
    
    
    <insert id="addCartItem" parameterType="CartItemAddVO" >
    	<![CDATA[
    		INSERT INTO PERSONAL_CART (PRODUCT_ID, MEMBER_ID)
			VALUES (#{productId},#{memberId})
    	]]>
    </insert>
    
    <delete id="deleteItem" parameterType="CartItemAddVO">
    	<![CDATA[
    		delete from personal_cart 
    		where member_id= #{memberId} and product_id=#{productId}
    	]]>
    </delete>
    
    <update id="changeProductCnt" parameterType="changeCartVO">
    	<![CDATA[
    		UPDATE PERSONAL_CART
			SET PRODUCT_CNT = #{productCnt}
			WHERE member_id= #{memberId} and product_id=#{productId}   		
    	]]>
    </update>
	
</mapper>
